<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.88.1" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Java SDK | Proxima</title>


  
  <meta name="description" content="本文主要介绍用户如何使用 Java SDK，来进行集合管理、文档的增删改查等功能。
1. 前提条件
使用 ProximaBE 的 Java SDK，必须满足以下两点：
-  JDK 1.8 或者以上版本
-  使用 Apache Maven
2. 安装 Java SDK
可以通过Apache …">
<meta property="og:title" content="Java SDK" />
<meta property="og:description" content="本文主要介绍用户如何使用 Java SDK，来进行集合管理、文档的增删改查等功能。
1. 前提条件 使用 ProximaBE 的 Java SDK，必须满足以下两点：
- JDK 1.8 或者以上版本 - 使用 Apache Maven 2. 安装 Java SDK 可以通过Apache Maven二方库依赖的方式，将 SDK 下载到自己的项目中。
&lt;dependency&gt; &lt;groupId&gt;com.alibaba.proxima&lt;/groupId&gt; &lt;artifactId&gt;proxima-be-java-sdk&lt;/artifactId&gt; &lt;version&gt;0.1.2-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; 3. 客户端创建 ProximaSearchClient 是ProximaBE 对外的所有接口的代理层，用户通过传入连接参数，创建该客户端对象，就可以对 ProximaBE 中的集合进行相关的操作。
3.1. 初始化连接参数 构建类：ConnectParam.Builder
首先通过调用 ConnectParam 的 newBuilder 接口，创建出 ConnectParam 的 Builder 对象，然后依次通过Builder对象设置 ProximaBE 的 host 地址，以及 grpc 端口等信息，最终调用 Builder的 build 接口，即可构建出 ConnectParam 对象。
Builder 参数说明：
   参数 说明     host ProximaBE对应的服务地址，String类型默认为 localhost   port ProximaBE对应的GRPC服务端口，int类型，默认16000   IdleTimeout GRPC链接空闲的超时时间，long类型，默认12小时    3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/sdkreference/java/" /><meta property="article:section" content="docs" />

<meta property="og:site_name" content="Proxima" />

<meta itemprop="name" content="Java SDK">
<meta itemprop="description" content="本文主要介绍用户如何使用 Java SDK，来进行集合管理、文档的增删改查等功能。
1. 前提条件 使用 ProximaBE 的 Java SDK，必须满足以下两点：
- JDK 1.8 或者以上版本 - 使用 Apache Maven 2. 安装 Java SDK 可以通过Apache Maven二方库依赖的方式，将 SDK 下载到自己的项目中。
&lt;dependency&gt; &lt;groupId&gt;com.alibaba.proxima&lt;/groupId&gt; &lt;artifactId&gt;proxima-be-java-sdk&lt;/artifactId&gt; &lt;version&gt;0.1.2-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; 3. 客户端创建 ProximaSearchClient 是ProximaBE 对外的所有接口的代理层，用户通过传入连接参数，创建该客户端对象，就可以对 ProximaBE 中的集合进行相关的操作。
3.1. 初始化连接参数 构建类：ConnectParam.Builder
首先通过调用 ConnectParam 的 newBuilder 接口，创建出 ConnectParam 的 Builder 对象，然后依次通过Builder对象设置 ProximaBE 的 host 地址，以及 grpc 端口等信息，最终调用 Builder的 build 接口，即可构建出 ConnectParam 对象。
Builder 参数说明：
   参数 说明     host ProximaBE对应的服务地址，String类型默认为 localhost   port ProximaBE对应的GRPC服务端口，int类型，默认16000   IdleTimeout GRPC链接空闲的超时时间，long类型，默认12小时    3.">

<meta itemprop="wordCount" content="1777">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java SDK"/>
<meta name="twitter:description" content="本文主要介绍用户如何使用 Java SDK，来进行集合管理、文档的增删改查等功能。
1. 前提条件 使用 ProximaBE 的 Java SDK，必须满足以下两点：
- JDK 1.8 或者以上版本 - 使用 Apache Maven 2. 安装 Java SDK 可以通过Apache Maven二方库依赖的方式，将 SDK 下载到自己的项目中。
&lt;dependency&gt; &lt;groupId&gt;com.alibaba.proxima&lt;/groupId&gt; &lt;artifactId&gt;proxima-be-java-sdk&lt;/artifactId&gt; &lt;version&gt;0.1.2-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; 3. 客户端创建 ProximaSearchClient 是ProximaBE 对外的所有接口的代理层，用户通过传入连接参数，创建该客户端对象，就可以对 ProximaBE 中的集合进行相关的操作。
3.1. 初始化连接参数 构建类：ConnectParam.Builder
首先通过调用 ConnectParam 的 newBuilder 接口，创建出 ConnectParam 的 Builder 对象，然后依次通过Builder对象设置 ProximaBE 的 host 地址，以及 grpc 端口等信息，最终调用 Builder的 build 接口，即可构建出 ConnectParam 对象。
Builder 参数说明：
   参数 说明     host ProximaBE对应的服务地址，String类型默认为 localhost   port ProximaBE对应的GRPC服务端口，int类型，默认16000   IdleTimeout GRPC链接空闲的超时时间，long类型，默认12小时    3."/>




<link rel="preload" href="/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css" as="style">
<link href="/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>







<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Proxima</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">文档</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; 站内搜索…"
  aria-label="站内搜索…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.cb2b4d5022e50d45d3816ae8c02c5c1c.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; 站内搜索…"
  aria-label="站内搜索…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.cb2b4d5022e50d45d3816ae8c02c5c1c.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">文档</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsintroductionintroduction-li">
  <a href="/docs/introduction/introduction/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsintroductionintroduction"><span class="">简介</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgettingstarted-li">
  <a href="/docs/gettingstarted/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsgettingstarted"><span class="">快速开始</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgettingstartedinstallation-li">
  <a href="/docs/gettingstarted/installation/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgettingstartedinstallation"><span class="">安装指南</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgettingstartedexample_usage-li">
  <a href="/docs/gettingstarted/example_usage/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgettingstartedexample_usage"><span class="">使用样例</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsadvancedguides-li">
  <a href="/docs/advancedguides/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsadvancedguides"><span class="">进阶指南</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesserver_config-li">
  <a href="/docs/advancedguides/server_config/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesserver_config"><span class="">服务配置</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesmeta_management-li">
  <a href="/docs/advancedguides/meta_management/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesmeta_management"><span class="">元数据</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesmonitor-li">
  <a href="/docs/advancedguides/monitor/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesmonitor"><span class="">监控报警</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesrepository-li">
  <a href="/docs/advancedguides/repository/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesrepository"><span class="">Repository</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesperformance-li">
  <a href="/docs/advancedguides/performance/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesperformance"><span class="">性能调优</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidestools-li">
  <a href="/docs/advancedguides/tools/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidestools"><span class="">常用工具</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsapireference-li">
  <a href="/docs/apireference/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsapireference"><span class="">API 手册</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapireferencehttp-li">
  <a href="/docs/apireference/http/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsapireferencehttp"><span class="">REST APIs</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docssdkreference-li">
  <a href="/docs/sdkreference/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docssdkreference"><span class="">SDK 手册</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssdkreferencepython-li">
  <a href="/docs/sdkreference/python/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencepython"><span class="">Python SDK</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssdkreferencecpp-li">
  <a href="/docs/sdkreference/cpp/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencecpp"><span class="">C&#43;&#43; SDK</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docssdkreferencejava-li">
  <a href="/docs/sdkreference/java/" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencejava"><span class="td-sidebar-nav-active-item">Java SDK</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssdkreferencego-li">
  <a href="/docs/sdkreference/go/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencego"><span class="">Golang SDK</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsusecases-li">
  <a href="/docs/usecases/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsusecases"><span class="">案例教程</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsusecasesimage_search-li">
  <a href="/docs/usecases/image_search/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsusecasesimage_search"><span class="">图片搜索</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsfaq-li">
  <a href="/docs/faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsfaq"><span class="">常见问题</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqcommon_faq-li">
  <a href="/docs/faq/common_faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqcommon_faq"><span class="">常见错误</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqperformance_faq-li">
  <a href="/docs/faq/performance_faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqperformance_faq"><span class="">性能优化</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqdeployment_faq-li">
  <a href="/docs/faq/deployment_faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqdeployment_faq"><span class="">部署问题</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqsample-li">
  <a href="/docs/faq/sample/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqsample"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsrelease-li">
  <a href="/docs/release/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsrelease"><span class="">发行版本</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreleaserelease-li">
  <a href="/docs/release/release/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsreleaserelease"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsbenchmark-li">
  <a href="/docs/benchmark/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsbenchmark"><span class="">性能测试</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbenchmarkbenchmark-li">
  <a href="/docs/benchmark/benchmark/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsbenchmarkbenchmark"><span class="">性能测试</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">












<a id="print" href="/docs/sdkreference/_print/"><i class="fa fa-print fa-fw"></i> 整节打印</a>



</div>



            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-前提条件">1. 前提条件</a></li>
    <li><a href="#2-安装-java-sdk">2. 安装 Java SDK</a></li>
    <li><a href="#3-客户端创建">3. 客户端创建</a>
      <ul>
        <li><a href="#31-初始化连接参数">3.1. 初始化连接参数</a></li>
        <li><a href="#32-创建客户端对象">3.2. 创建客户端对象</a></li>
        <li><a href="#33-示例">3.3. 示例</a></li>
      </ul>
    </li>
    <li><a href="#4-集合管理">4. 集合管理</a>
      <ul>
        <li><a href="#41-创建集合">4.1. 创建集合</a></li>
        <li><a href="#42-查询集合配置信息">4.2. 查询集合配置信息</a></li>
        <li><a href="#43-查询集合统计信息">4.3. 查询集合统计信息</a></li>
        <li><a href="#44-删除集合">4.4. 删除集合</a></li>
        <li><a href="#45-获取集合列表">4.5. 获取集合列表</a></li>
      </ul>
    </li>
    <li><a href="#5-文档管理">5. 文档管理</a>
      <ul>
        <li><a href="#51-创建-writerequest">5.1. 创建 WriteRequest</a></li>
        <li><a href="#52-执行写入">5.2. 执行写入</a></li>
        <li><a href="#53-示例">5.3. 示例</a></li>
      </ul>
    </li>
    <li><a href="#6-文档查询">6. 文档查询</a>
      <ul>
        <li><a href="#61-向量查询">6.1. 向量查询</a></li>
        <li><a href="#62-主键查询">6.2. 主键查询</a></li>
      </ul>
    </li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="/docs/">文档</a>
</li>




<li class="breadcrumb-item" >
	<a href="/docs/sdkreference/">SDK 手册</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/docs/sdkreference/java/">Java SDK</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Java SDK</h1>
	
	<header class="article-meta">
		
		
			
				


			
				


			
		
		
	</header>    
	<p>本文主要介绍用户如何使用 Java SDK，来进行集合管理、文档的增删改查等功能。</p>
<h2 id="1-前提条件">1. 前提条件</h2>
<p>使用 ProximaBE 的 Java SDK，必须满足以下两点：</p>
<pre tabindex="0"><code>-  JDK 1.8 或者以上版本
-  使用 Apache Maven
</code></pre><h2 id="2-安装-java-sdk">2. 安装 Java SDK</h2>
<p>可以通过Apache Maven二方库依赖的方式，将 SDK 下载到自己的项目中。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">dependency</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
<span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">groupId</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">com</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">alibaba</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">proxima</span><span style="color:#ce5c00;font-weight:bold">&lt;/</span><span style="color:#000">groupId</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
<span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">artifactId</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">proxima</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">be</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">java</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">sdk</span><span style="color:#ce5c00;font-weight:bold">&lt;/</span><span style="color:#000">artifactId</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
<span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">version</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">2</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">SNAPSHOT</span><span style="color:#ce5c00;font-weight:bold">&lt;/</span><span style="color:#000">version</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
<span style="color:#ce5c00;font-weight:bold">&lt;/</span><span style="color:#000">dependency</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
</code></pre></div><h2 id="3-客户端创建">3. 客户端创建</h2>
<p>ProximaSearchClient 是ProximaBE 对外的所有接口的代理层，用户通过传入连接参数，创建该客户端对象，就可以对 ProximaBE 中的集合进行相关的操作。</p>
<h3 id="31-初始化连接参数">3.1. 初始化连接参数</h3>
<p><strong>构建类</strong>：ConnectParam.Builder</p>
<p><em>首先通过调用 ConnectParam 的 newBuilder 接口，创建出 ConnectParam 的 Builder 对象，然后依次通过Builder对象设置 ProximaBE 的 host 地址，以及 grpc 端口等信息，最终调用 Builder的 build 接口，即可构建出 ConnectParam 对象。</em></p>
<p><strong>Builder 参数说明</strong>：</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">host</td>
<td style="text-align:left">ProximaBE对应的服务地址，String类型默认为 localhost</td>
</tr>
<tr>
<td style="text-align:left">port</td>
<td style="text-align:left">ProximaBE对应的GRPC服务端口，int类型，默认16000</td>
</tr>
<tr>
<td style="text-align:left">IdleTimeout</td>
<td style="text-align:left">GRPC链接空闲的超时时间，long类型，默认12小时</td>
</tr>
</tbody>
</table>
<h3 id="32-创建客户端对象">3.2. 创建客户端对象</h3>
<p><strong>接口</strong>：ProximaGrpcSearchClient(ConnectParam connectParam)</p>
<p><em>通过传入的 connectParam 对象创建 ProximaBE 客户端，目前支持 Grpc 协议，创建成功后返回 ProximaSearchClient 对象，目前 Client 中的接口均为同步接口。</em></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>ConnectParam：表示连接 ProximaBE 所需要的相关连接参数信息</li>
</ul>
<h3 id="33-示例">3.3. 示例</h3>
<p>创建 ProximaSearchClient 对象</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">com.alibaba.proxima.se.client.*</span><span style="color:#ce5c00;font-weight:bold">;</span>

<span style="color:#8f5902;font-style:italic">// init connect params
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ConnectParam</span> <span style="color:#000">connectParam</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">ConnectParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withHost</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;127.0.0.1&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPort</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">16000</span><span style="color:#ce5c00;font-weight:bold">)</span>
                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

<span style="color:#8f5902;font-style:italic">// create client
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">ProximaGrpcSearchClient</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">connectParam</span><span style="color:#ce5c00;font-weight:bold">);</span>

</code></pre></div><h2 id="4-集合管理">4. 集合管理</h2>
<p>集合管理主要包括集合的创建、集合的查询和集合的删除等操作。</p>
<h3 id="41-创建集合">4.1. 创建集合</h3>
<h4 id="411-创建-collectionconfig">4.1.1 创建 CollectionConfig</h4>
<p><strong>构造类</strong>：CollectionConfig.Builder</p>
<p><em>首先通过调用 CollectionConfig 的 newBuilder 接口，创建出 CollectionConfig 的 Builder 对象，然后通过 Builder 对象设置集合名称、索引列信息、正排列信息等，最终调用 Builder 的 build 接口，即可构建出 CollectionConfig 对象。</em></p>
<p><strong>Builder 参数说明：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">collectionName</td>
<td style="text-align:left">集合的名称，String类型</td>
</tr>
<tr>
<td style="text-align:left">indexColumnParams</td>
<td style="text-align:left">索引列参数列表，List<IndexColumnParam>类型，IndexColumnParam类型参数见下表</td>
</tr>
<tr>
<td style="text-align:left">forwardColumnNames</td>
<td style="text-align:left">正排列的名称列表，List<String>类型</td>
</tr>
<tr>
<td style="text-align:left">maxDocsPerSegment</td>
<td style="text-align:left">分片最大文档数，long类型，默认值为0，表示不限制单片文档数</td>
</tr>
<tr>
<td style="text-align:left">databaseRepository</td>
<td style="text-align:left">数据库源相关配置，如果是数据库旁路集合，需要配置该选项，目前只支持 mysql 数据库</td>
</tr>
</tbody>
</table>
<p><strong>IndexColumnParam 参数:</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">columnName</td>
<td style="text-align:left">索引列名称，String 类型</td>
</tr>
<tr>
<td style="text-align:left">indexType</td>
<td style="text-align:left">索引类型，IndexType 类型，目前支持 PROXIMA_GRAPH_INDEX 类型索引</td>
</tr>
<tr>
<td style="text-align:left">dataType</td>
<td style="text-align:left">索引列数据类型，DataType 类型</td>
</tr>
<tr>
<td style="text-align:left">dimension</td>
<td style="text-align:left">索引的维度，int 类型</td>
</tr>
<tr>
<td style="text-align:left">extraParams</td>
<td style="text-align:left">其它的参数，Map类型</td>
</tr>
</tbody>
</table>
<h4 id="412-调用创建接口">4.1.2 调用创建接口</h4>
<p><strong>接口：</strong> Status <strong>createCollection</strong>(CollectionConfig collectionConfig)</p>
<p><em>根据参数 CollectionConfig 对象创建集合，返回值为 Status 对象，表示集合创建成功与否，如果传入的 CollectionConfig 对象非法，会抛出 ProximaBEException 异常。</em></p>
<p><strong>参数说明：</strong></p>
<ul>
<li>collectionConfig：其中包含了集合的基础配置信息，主要有集合名称、索引列信息、正排列名称列表等。</li>
</ul>
<p><strong>返回值：</strong></p>
<ul>
<li>Status：表示创建成功与否，其中包含错误码和错误描述</li>
</ul>
<h4 id="413-示例">4.1.3 示例</h4>
<p><strong>示例 1</strong>：创建一个带有两个正排列，以及单个向量索引列的集合</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">createCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">dimension</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">8</span><span style="color:#ce5c00;font-weight:bold">;</span>

        <span style="color:#8f5902;font-style:italic">// create collection builder
</span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000">CollectionConfig</span> <span style="color:#000">config</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CollectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withCollectionName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">)</span>                            <span style="color:#8f5902;font-style:italic">// set collection name
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withForwardColumnNames</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Arrays</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">asList</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;forward1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;forward2&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#8f5902;font-style:italic">// set forward column names
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addIndexColumnParam</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;index1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">VECTOR_FP32</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">dimension</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#8f5902;font-style:italic">// add one index column param
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>                                                      <span style="color:#8f5902;font-style:italic">// build the CollectionConfig
</span><span style="color:#8f5902;font-style:italic"></span>
        <span style="color:#8f5902;font-style:italic">// call create collection interface
</span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#204a87;font-weight:bold">try</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">createCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;============== Create collection success. ================&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
                <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
            <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Create collection failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
                <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
            <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">catch</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaBEException</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">printStackTrace</span><span style="color:#ce5c00;font-weight:bold">();</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><p><strong>示例 2</strong>：创建一个带有两个正排列、单个向量索引列、以及作为Mysql 数据旁路的集合</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">createCollectionWithRepo</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection2&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">dimension</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">8</span><span style="color:#ce5c00;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">// create database repository
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">DatabaseRepository</span> <span style="color:#000">repo</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">DatabaseRepository</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withConnectionUri</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;mysql://host.com:8080/mysql_database&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">// set connection uri
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withTableName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;mysql_table1&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>                              <span style="color:#8f5902;font-style:italic">// set table name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withRepositoryName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;mysql_repo&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>                           <span style="color:#8f5902;font-style:italic">// set repository name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withUser</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;root&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>                                           <span style="color:#8f5902;font-style:italic">// set user name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPassword</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;root&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>                                       <span style="color:#8f5902;font-style:italic">// set password
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// create collection builder
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">CollectionConfig</span> <span style="color:#000">config</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">CollectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withCollectionName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">)</span>                            <span style="color:#8f5902;font-style:italic">// set collection name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withForwardColumnNames</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Arrays</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">asList</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;forward1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;forward2&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#8f5902;font-style:italic">// set forward column name list
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addIndexColumnParam</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;index1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">VECTOR_FP32</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">dimension</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#8f5902;font-style:italic">// add one index column param
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withDatabaseRepository</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">repo</span><span style="color:#ce5c00;font-weight:bold">)</span>                                  <span style="color:#8f5902;font-style:italic">// set database repoistory
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// call create collection interface
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">try</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">createCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;============== Create collection success. ================&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Create collection failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">catch</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaBEException</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">printStackTrace</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="42-查询集合配置信息">4.2. 查询集合配置信息</h3>
<p><strong>接口：</strong> DescribeCollectionResponse <strong>describeCollection</strong>(String collectionName)</p>
<p><em>根据传入的集合名称，获取当前集合对应的相关配置信息。</em></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>collectionName：集合名称</li>
</ul>
<p><strong>返回值：</strong></p>
<ul>
<li>DescribeCollectionResponse：其中包含 Status 以及 CollectionInfo 两部分，Status 描述当前请求成功与否，CollectionInfo 描述集合的配置信息</li>
</ul>
<p><strong>示例：</strong></p>
<p>查询 collection 的配置信息</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">describeCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#8f5902;font-style:italic">// describe collection
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">DescribeCollectionResponse</span> <span style="color:#000">descResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">describeCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">);</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">descResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;================ Describe collection success. ===================&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#000">CollectionInfo</span> <span style="color:#000">info</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">descResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionInfo</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#000">CollectionConfig</span> <span style="color:#000">collectionConfig</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">info</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionConfig</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CollectionName: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">collectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionName</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CollectionStatus: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">info</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionStatus</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Uuid: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">info</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Forward columns: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">collectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getForwardColumnNames</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">IndexColumnParam</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">indexColumnParamList</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">collectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIndexColumnParams</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">indexColumnParamList</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">size</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">IndexColumnParam</span> <span style="color:#000">indexParam</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">indexColumnParamList</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IndexColumn: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getColumnName</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IndexType: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDataType</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;DataType: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDataType</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Dimension: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDimension</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Describe collection failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">descResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="43-查询集合统计信息">4.3. 查询集合统计信息</h3>
<p><strong>接口：</strong> StatsCollectionResponse <strong>statsCollection</strong>(String collectionName)</p>
<p><em>根据传入的集合名称，获取当前集合对应的相关统计信息。</em></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>collectionName：集合名称</li>
</ul>
<p><strong>返回值：</strong></p>
<ul>
<li>StatsCollectionResponse：其中包含 Status 以及 CollectionStats 两部分，Status 描述当前请求成功与否，CollectionStats 描述集合的相关统计信息，包含的信息如下：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">字段名称</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">collectionPath</td>
<td style="text-align:left">collection 的索引路径</td>
</tr>
<tr>
<td style="text-align:left">totalDocCount</td>
<td style="text-align:left">总的文档数量</td>
</tr>
<tr>
<td style="text-align:left">totalSegmentCount</td>
<td style="text-align:left">总的segment数量</td>
</tr>
<tr>
<td style="text-align:left">totalIndexFileCount</td>
<td style="text-align:left">总的索引文件数量</td>
</tr>
<tr>
<td style="text-align:left">totalIndexFileSize</td>
<td style="text-align:left">总的索引文件大小</td>
</tr>
<tr>
<td style="text-align:left">segmentStatsList</td>
<td style="text-align:left">每个 segment 相应的统计信息，包括 segment 的总文档数量、索<br>引文件数量和大小，以及最大/小 doc id等</td>
</tr>
</tbody>
</table>
<p><strong>示例 ：</strong></p>
<p>查询指定集合的统计信息</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">statsCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#8f5902;font-style:italic">// call stats collection interface
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">StatsCollectionResponse</span> <span style="color:#000">statsResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">statsCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">);</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">statsResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;==================== Stats collection success. ======================&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#000">CollectionStats</span> <span style="color:#000">stats</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">statsResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionStats</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CollectionName: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionName</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;TotalDocCount: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getTotalDocCount</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;TotalSegmentCount: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getTotalSegmentCount</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSegmentStatsCount</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Segment: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SegmentDocCount: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSegmentStats</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getDocDount</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SegmentIndexFileCount: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSegmentStats</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getIndexFileCount</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;SegmentMaxDocId: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">stats</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getSegmentStats</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getMaxDocId</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Stats collection failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">statsResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getStatus</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="44-删除集合">4.4. 删除集合</h3>
<p><strong>接口：</strong> Status <strong>dropCollection</strong>(String collectionName)</p>
<p><em>删除指定集合，集合名由参数 collectionName 指定</em></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>collectionName：删除的集合名称</li>
</ul>
<p><strong>返回值</strong>：</p>
<ul>
<li>Status：表示删除成功与否，其中包含错误码和错误描述</li>
</ul>
<p><strong>示例</strong> ：</p>
<p>删除指定集合</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">dropCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#8f5902;font-style:italic">// call drop collection interface
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">dropCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">);</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;==================== Dorp collection success. ========================&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Drop collection failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="45-获取集合列表">4.5. 获取集合列表</h3>
<p><strong>接口：</strong> ListCollectionsResponse <strong>listCollections</strong>(ListCondition listCondition)</p>
<p><em>根据传入的 ListCondition 条件获取满足条件的集合列表</em></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>listCondition：集合需要满足的条件，目前只包含了一个 Repository 名称字段，仅用在Mysql 同步数据时，如果该字段为空或者 listCondition 为空时，返回所有的集合</li>
</ul>
<p><strong>返回值</strong>：</p>
<ul>
<li>ListCollectionsResponse：包含 Status 和 CollectionInfo List 两部分，前者描述请求是否成功，后者描述所有集合的配置信息。</li>
</ul>
<p><em><strong>示例 ：</strong></em></p>
<p>获取 repository name 为 mysql_repo 的所有集合</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">listCollections</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#8f5902;font-style:italic">// build list condition object
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">ListCondition</span> <span style="color:#000">listCondition</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">ListCondition</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withRepositoryName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;mysql_repo&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">// set repository name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// call list collections interface
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">ListCollectionsResponse</span> <span style="color:#000">listResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">listCollections</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">listCondition</span><span style="color:#ce5c00;font-weight:bold">);</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">listResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;List collections success.&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">listResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionCount</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Collection &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#000">CollectionInfo</span> <span style="color:#000">info</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">listResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollection</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#000">CollectionConfig</span> <span style="color:#000">collectionConfig</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">info</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionConfig</span><span style="color:#ce5c00;font-weight:bold">();</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CollectionName: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">collectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionName</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CollectionStatus: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">info</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getCollectionStatus</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Uuid: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">info</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getUuid</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Forward columns: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">collectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getForwardColumnNames</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#000">List</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">IndexColumnParam</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">indexColumnParamList</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">collectionConfig</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getIndexColumnParams</span><span style="color:#ce5c00;font-weight:bold">();</span>
            <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">j</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">;</span> <span style="color:#000">j</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">indexColumnParamList</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">size</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">j</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
                <span style="color:#000">IndexColumnParam</span> <span style="color:#000">indexParam</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">indexColumnParamList</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">get</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">j</span><span style="color:#ce5c00;font-weight:bold">);</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IndexColumn: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getColumnName</span><span style="color:#ce5c00;font-weight:bold">());</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;IndexType: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDataType</span><span style="color:#ce5c00;font-weight:bold">());</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;DataType: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDataType</span><span style="color:#ce5c00;font-weight:bold">());</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Dimension: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">indexParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDimension</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;List collections failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">listResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h2 id="5-文档管理">5. 文档管理</h2>
<p>文档管理主要包括文档的插入、更新和删除操作，ProximaBE 中将文档的这三种操作，整合为一个通用的 Write 接口，通过一个 WriteRequest 结构来描述相关的操作，WriteRequest 中既可以描述单条记录的操作，也可以描述批量记录的操作。</p>
<h3 id="51-创建-writerequest">5.1. 创建 WriteRequest</h3>
<p><strong>构造类：WriteRequest.Builder</strong></p>
<p><em>首先通过 WriteRequest 的 newBuilder() 接口创建出 WriteRequest 的 Builder 对象，然后通过 Builder 对象设置相关参数，包括集合名称、正排列和索引列，以及 Rows等信息，最终调用 Builder 的 build 接口创建出 WriteRequest 对象。</em></p>
<p><strong>参数说明</strong>：</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">collectionName</td>
<td style="text-align:left">集合名称，String类型</td>
</tr>
<tr>
<td style="text-align:left">forwardColumnList</td>
<td style="text-align:left">正排列的名称列表，List类型，插入和更新时必须要设置，删除时不需要设置</td>
</tr>
<tr>
<td style="text-align:left">indexColumnMetaList</td>
<td style="text-align:left">索引列的 Meta 列表，插入和更新时必须要设置，删除时不需要设置</td>
</tr>
<tr>
<td style="text-align:left">rows</td>
<td style="text-align:left">请求中包含的文档操作列表，List类型，每一个 row 表示一个文档操作，具体内容见 Rows 参数说明</td>
</tr>
<tr>
<td style="text-align:left">requestId</td>
<td style="text-align:left">请求的 id，String类型，默认为空</td>
</tr>
<tr>
<td style="text-align:left">magicNumber</td>
<td style="text-align:left">请求中的魔数，long类型，仅在通过 Mysql 作为数据源时需要设置</td>
</tr>
</tbody>
</table>
<p><strong>Row 参数说明</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">primaryKey</td>
<td style="text-align:left">row的主键，long类型</td>
</tr>
<tr>
<td style="text-align:left">operationType</td>
<td style="text-align:left">row的操作类型，候选值为 INSERT、UPDATE、DELETE三种</td>
</tr>
<tr>
<td style="text-align:left">indexValues</td>
<td style="text-align:left">对应索引列的值列表，List类型，operationType为DELETE操作时，不需要指定，支持三种格式：<br> <ul><li>向量数组，如[1.0, 2.0, 3.0]</li><li>json数组str，如&quot;[1.0,2.0,3.0]&quot;</li><li>bytes，必须为小端字节序。</li></ul></td>
</tr>
<tr>
<td style="text-align:left">forwardValues</td>
<td style="text-align:left">对应正排列的值列表，List类型，operationType为DELETE时，不需要指定</td>
</tr>
<tr>
<td style="text-align:left">lsnContext</td>
<td style="text-align:left">mysql 的 lsn 信息，仅当用 mysql 做数据同步时需要</td>
</tr>
</tbody>
</table>
<h3 id="52-执行写入">5.2. 执行写入</h3>
<p><strong>接口：</strong> Status <strong>write</strong>(WriteRequest request)</p>
<p><em>向 ProximaBE 中写入文档操作请求，执行完成后返回 Status，表示执行成功与否，如果传入的 WriteRequest 请求非法，会抛出 ProximaBEException 异常。</em></p>
<p><strong>参数说明：</strong></p>
<ul>
<li>request：包含某个集合的插入、更新和删除等文档操作</li>
</ul>
<p><em><strong>返回值：</strong></em></p>
<ul>
<li>Status：表示写入请求的成功与否</li>
</ul>
<h3 id="53-示例">5.3. 示例</h3>
<p><strong>示例1</strong>：向集合 collection1 中分别插入和更新一条记录</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">write1</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">float</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">vectors1</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">3</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">4</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">5</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">6</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">7</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">8</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">};</span>
    <span style="color:#204a87;font-weight:bold">float</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">vectors2</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">3</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">4</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">5</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">6</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">7</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">8</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">5f</span><span style="color:#ce5c00;font-weight:bold">};</span>
    <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">dimension</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">8</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">long</span> <span style="color:#000">primaryKey</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">123456</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">forward1Value</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">123</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">float</span> <span style="color:#000">forward2Value</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">100</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">123f</span><span style="color:#ce5c00;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">// build insert row
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span> <span style="color:#000">insertRow</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">primaryKey</span><span style="color:#ce5c00;font-weight:bold">)</span>                           <span style="color:#8f5902;font-style:italic">// set primary key
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withOperationType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">OperationType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">INSERT</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// set operation type
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addIndexValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">vectors1</span><span style="color:#ce5c00;font-weight:bold">)</span>                        <span style="color:#8f5902;font-style:italic">// add one index value
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addForwardValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">forward1Value</span><span style="color:#ce5c00;font-weight:bold">)</span>                 <span style="color:#8f5902;font-style:italic">// add one forard value
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addForwardValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">forward2Value</span><span style="color:#ce5c00;font-weight:bold">)</span>                 <span style="color:#8f5902;font-style:italic">// add one forward value
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// build update row
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span> <span style="color:#000">updateRow</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">primaryKey</span><span style="color:#ce5c00;font-weight:bold">)</span>                           <span style="color:#8f5902;font-style:italic">// set primary key
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withOperationType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">OperationType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">UPDATE</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// set operation type
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addIndexValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">vectors2</span><span style="color:#ce5c00;font-weight:bold">)</span>                        <span style="color:#8f5902;font-style:italic">// add index value
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addForwardValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">forward1Value</span><span style="color:#ce5c00;font-weight:bold">)</span>                 <span style="color:#8f5902;font-style:italic">// add forward value
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addForwardValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">forward2Value</span><span style="color:#ce5c00;font-weight:bold">)</span>                 <span style="color:#8f5902;font-style:italic">// add forward value
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// build delete row
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">long</span> <span style="color:#000">deleteKey</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">10000</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span> <span style="color:#000">deleteRow</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">deleteKey</span><span style="color:#ce5c00;font-weight:bold">)</span>                            <span style="color:#8f5902;font-style:italic">// set primary key
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withOperationType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">OperationType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">DELETE</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// set operation type
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// build write request
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">WriteRequest</span> <span style="color:#000">writeRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withCollectionName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">)</span>                            <span style="color:#8f5902;font-style:italic">// set collection name
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withForwardColumnList</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">Arrays</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">asList</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;forward1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;forward2&#34;</span><span style="color:#ce5c00;font-weight:bold">))</span>  <span style="color:#8f5902;font-style:italic">// set forward column list
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addIndexColumnMeta</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;index1&#34;</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">VECTOR_FP32</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">dimension</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// add one index column meta, otherwise call withIndexColumnMetaList
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addRow</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">insertRow</span><span style="color:#ce5c00;font-weight:bold">)</span>                                             <span style="color:#8f5902;font-style:italic">// add insert row
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addRow</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">updateRow</span><span style="color:#ce5c00;font-weight:bold">)</span>                                             <span style="color:#8f5902;font-style:italic">// add update row
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addRow</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">deleteRow</span><span style="color:#ce5c00;font-weight:bold">)</span>                                             <span style="color:#8f5902;font-style:italic">// add delete row
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#204a87;font-weight:bold">try</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#8f5902;font-style:italic">// call write interface
</span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">write</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">writeRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;============== Write success. ===============&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Write failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">catch</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaBEException</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">printStackTrace</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}*/</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><p><strong>示例2</strong>：向集合 collection1 中删除一条记录</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">write2</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#8f5902;font-style:italic">// build delete row
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">long</span> <span style="color:#000">deleteKey</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">123456</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span> <span style="color:#000">deleteRow</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">Row</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">deleteKey</span><span style="color:#ce5c00;font-weight:bold">)</span>                            <span style="color:#8f5902;font-style:italic">// set primary key
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withOperationType</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">OperationType</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">DELETE</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic">// set operation type
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#8f5902;font-style:italic">// build write request
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">WriteRequest</span> <span style="color:#000">writeRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withCollectionName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">)</span>                            <span style="color:#8f5902;font-style:italic">// set collection name
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">addRow</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">deleteRow</span><span style="color:#ce5c00;font-weight:bold">)</span>                                             <span style="color:#8f5902;font-style:italic">// add delete row
</span><span style="color:#8f5902;font-style:italic"></span>                <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>

    <span style="color:#204a87;font-weight:bold">try</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#8f5902;font-style:italic">// call write interface
</span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">write</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">writeRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;============== Write success. ===============&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Write failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">status</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">catch</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaBEException</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">printStackTrace</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}*/</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h2 id="6-文档查询">6. 文档查询</h2>
<p>文档查询目前主要包括两种类型，一种是根据向量来进行 knn 的查询，另一种是直接根据文档的主键来查询相应的文档。</p>
<h3 id="61-向量查询">6.1. 向量查询</h3>
<h4 id="611-创建-queryrequest">6.1.1 创建 QueryRequest</h4>
<p><strong>构造类：QueryRequest.Builder</strong></p>
<p><em>通过 QueryRequest 的 newBuilder 接口创建出 QueryRequest 的 Builder 对象，然后通过 Builder 对象设置相关查询参数，主要包括集合名称和 KnnQueryParam等参数，最终调用 Builder 的 build 接口构建出 QueryRequest 对象。</em></p>
<p><strong>参数说明：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">collectionName</td>
<td style="text-align:left">要查询的集合名称，String类型</td>
</tr>
<tr>
<td style="text-align:left">knnQueryParam</td>
<td style="text-align:left">knn 查询的参数，KnnQueryParam类型，具体内容见下表</td>
</tr>
<tr>
<td style="text-align:left">debugMode</td>
<td style="text-align:left">是否开启调试模式，boolean类型，默认为false</td>
</tr>
</tbody>
</table>
<p><strong>KnnQueryParam 参数</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">columnName</td>
<td style="text-align:left">要查询的索引列名，String类型</td>
</tr>
<tr>
<td style="text-align:left">topk</td>
<td style="text-align:left">查询的结果数量，int类型，默认为100</td>
</tr>
<tr>
<td style="text-align:left">features</td>
<td style="text-align:left">查询的特征，可以是单个或者多个向量，支持三种类型：<br /> <ul><li>小端字节序的bytes</li><li>json数组字符串，支持嵌套json数组。如2个batch的2维向量，可以写为&quot;[[1.0,2.0],[3.0,4.0]]&quot;</li><li>向量列表，如[[5.1, 3.5, 1.4, 0.2], [5.5, 2.3, 4.0, 1.3]]</li></ul></td>
</tr>
<tr>
<td style="text-align:left">dataType</td>
<td style="text-align:left">查询向量的数据类型，向量列表类型的特征支持自动推导，其它类型的必须设置</td>
</tr>
<tr>
<td style="text-align:left">dimension</td>
<td style="text-align:left">查询向量的维度，向量列表类型的特征支持自动推导，其它类型的必须设置</td>
</tr>
<tr>
<td style="text-align:left">batchCount</td>
<td style="text-align:left">查询的batch数量，向量列表类型的特征支持自动推导，其它类型的必须设置</td>
</tr>
<tr>
<td style="text-align:left">radius</td>
<td style="text-align:left">过滤结果的分数阈值，仅当分数小于该阈值的结果会返回，float类型，默认值为0，表示不过滤</td>
</tr>
<tr>
<td style="text-align:left">isLinear</td>
<td style="text-align:left">是否使用暴力检索，boolean类型，默认false</td>
</tr>
</tbody>
</table>
<h4 id="612-执行查询">6.1.2 执行查询</h4>
<p><strong>接口：</strong> QueryResponse <strong>query</strong>(QueryRequest request)</p>
<p><em>通过调用上述接口，向 ProximaBE 发起查询请求，返回 QueryResponse，当传入的 QueryRequest 非法时，会抛出 ProximaBEException 异常。</em></p>
<p><strong>参数说明：</strong></p>
<ul>
<li>request：表示查询请求，包含查询的集合以及查询的向量等信息</li>
</ul>
<p><strong>返回值：</strong></p>
<ul>
<li>QueryResponse：表示查询的返回结果，包含查询的状态信息，以及查询的文档结果。</li>
</ul>
<h4 id="613-示例">6.1.3. 示例</h4>
<p>根据某个向量查询最相似的文档</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">float</span><span style="color:#ce5c00;font-weight:bold">[]</span> <span style="color:#000">features</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">{</span><span style="color:#000">1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">3</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">4</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">5</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">6</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">7</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">8</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">0f</span><span style="color:#ce5c00;font-weight:bold">};</span>
    <span style="color:#8f5902;font-style:italic">//  when batch querying, features can be following:
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">//  float[][] features = {
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">//          {1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 6.0f, 7.0f, 8.0f},
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">//          {1.0f, 2.0f, 3.0f, 4.0f, 5.0f, 6.0f, 7.0f, 8.0f}
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">//  };
</span><span style="color:#8f5902;font-style:italic"></span>
    <span style="color:#8f5902;font-style:italic">// build query request
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">QueryRequest</span> <span style="color:#000">queryRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">QueryRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withCollectionName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">)</span>              <span style="color:#8f5902;font-style:italic">// set collection name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withKnnQueryParam</span><span style="color:#ce5c00;font-weight:bold">(</span>                              <span style="color:#8f5902;font-style:italic">// set knn query param
</span><span style="color:#8f5902;font-style:italic"></span>                    <span style="color:#000">QueryRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">KnnQueryParam</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>  <span style="color:#8f5902;font-style:italic">// new KnnQueryParam builder
</span><span style="color:#8f5902;font-style:italic"></span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withColumnName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;index1&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>        <span style="color:#8f5902;font-style:italic">// set index column name
</span><span style="color:#8f5902;font-style:italic"></span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withTopk</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">10</span><span style="color:#ce5c00;font-weight:bold">)</span>                    <span style="color:#8f5902;font-style:italic">// set topk
</span><span style="color:#8f5902;font-style:italic"></span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withFeatures</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">features</span><span style="color:#ce5c00;font-weight:bold">)</span>          <span style="color:#8f5902;font-style:italic">// set query features
</span><span style="color:#8f5902;font-style:italic"></span>                            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">())</span>                        <span style="color:#8f5902;font-style:italic">// build knnQueryParam object
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>                                        <span style="color:#8f5902;font-style:italic">// build query request
</span><span style="color:#8f5902;font-style:italic"></span>
    <span style="color:#000">QueryResponse</span> <span style="color:#000">queryResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">try</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#8f5902;font-style:italic">// call query interface
</span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000">queryResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">query</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">queryRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">catch</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaBEException</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">printStackTrace</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">queryResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;================ Query success =====================&#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">queryResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getQueryResultCount</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">QueryResult</span> <span style="color:#000">queryResult</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">queryResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getQueryResult</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">);</span>
            <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">d</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">0</span><span style="color:#ce5c00;font-weight:bold">;</span> <span style="color:#000">d</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">queryResult</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocumentCount</span><span style="color:#ce5c00;font-weight:bold">();</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">d</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
                <span style="color:#000">Document</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">queryResult</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">d</span><span style="color:#ce5c00;font-weight:bold">);</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Doc key: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">());</span>
                <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Doc score: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getScore</span><span style="color:#ce5c00;font-weight:bold">());</span>

                <span style="color:#000">Set</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">forwardKeys</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getForwardKeySet</span><span style="color:#ce5c00;font-weight:bold">();</span>
                <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">forwardKey</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">forwardKeys</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
                    <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Doc forward: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">forwardKey</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34; -&gt; &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span>
                                                          <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getForwardValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">forwardKey</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getStringValue</span><span style="color:#ce5c00;font-weight:bold">());</span>
                <span style="color:#ce5c00;font-weight:bold">}</span>
            <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Query failed: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">queryResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getStatus</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><h3 id="62-主键查询">6.2. 主键查询</h3>
<h4 id="621-创建-getdocumentrequest">6.2.1 创建 GetDocumentRequest</h4>
<p><strong>构造类：GetDocumentRequest.Builder</strong></p>
<p><em>通过 GetDocumentRequest 的 newBuilder 接口，创建出 GetDocumentRequest 的 Builder 对象，然后通过 Builder 对象设置相关查询参数，主要包括集合名称和 主键等参数，最终调用 Builder 的 build 接口构建出 GetDocumentRequest 对象。</em></p>
<p><strong>Builder 参数说明：</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">collectionName</td>
<td style="text-align:left">要查询的集合名称，String类型</td>
</tr>
<tr>
<td style="text-align:left">primaryKey</td>
<td style="text-align:left">要查询的文档的主键，long类型</td>
</tr>
<tr>
<td style="text-align:left">debugMode</td>
<td style="text-align:left">是否开启调试模式， boolean类型，默认为false</td>
</tr>
</tbody>
</table>
<h4 id="622-执行查询">6.2.2 执行查询</h4>
<p><strong>接口：</strong> GetDocumentResponse <strong>getDocumentByKey</strong>(GetDocumentRequest request)</p>
<p><em>通过调用上述接口，向 ProximaBE 发起查询请求，返回 GetDocumentResponse 对象，当传入的 GetDocumentRequest 非法时，会抛出 ProximaBEException 异常。</em></p>
<p><strong>参数说明</strong>：</p>
<ul>
<li>request：表示查询指定文档请求</li>
</ul>
<p><strong>返回值</strong>：</p>
<ul>
<li>GetDocumentResponse：表示查询的返回结果，包含查询的状态信息，以及查询文档的结果。</li>
</ul>
<h4 id="623-示例">6.2.3 示例</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">boolean</span> <span style="color:#000">getDocument</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaSearchClient</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
    <span style="color:#000">String</span> <span style="color:#000">collectionName</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;collection1&#34;</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#8f5902;font-style:italic">// build get document request
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">GetDocumentRequest</span> <span style="color:#000">getRequest</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">GetDocumentRequest</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">()</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withCollectionName</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">collectionName</span><span style="color:#ce5c00;font-weight:bold">)</span>    <span style="color:#8f5902;font-style:italic">// set collection name
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">123456</span><span style="color:#ce5c00;font-weight:bold">)</span>                <span style="color:#8f5902;font-style:italic">// set primary key
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">withDebugMode</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">)</span>                   <span style="color:#8f5902;font-style:italic">// set debug mode, defalut false
</span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">();</span>                              <span style="color:#8f5902;font-style:italic">// build GetDocumentRequest object
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">GetDocumentResponse</span> <span style="color:#000">getResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">try</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#8f5902;font-style:italic">// call get document by key interface
</span><span style="color:#8f5902;font-style:italic"></span>        <span style="color:#000">getResponse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocumentByKey</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">getRequest</span><span style="color:#ce5c00;font-weight:bold">);</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">catch</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">ProximaBEException</span> <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">e</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">printStackTrace</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">getResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">ok</span><span style="color:#ce5c00;font-weight:bold">())</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;======================== Get Document success ======================== &#34;</span><span style="color:#ce5c00;font-weight:bold">);</span>
        <span style="color:#000">Document</span> <span style="color:#000">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">getResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDocument</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;PrimaryKey: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getPrimaryKey</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Score: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getScore</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#000">Set</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">forwardKeys</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getForwardKeySet</span><span style="color:#ce5c00;font-weight:bold">();</span>
        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">String</span> <span style="color:#000">forwardKey</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">forwardKeys</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>
            <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Doc forward: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">forwardKey</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34; -&gt; &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span>
                   <span style="color:#000">document</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getForwardValue</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">forwardKey</span><span style="color:#ce5c00;font-weight:bold">).</span><span style="color:#c4a000">getStringValue</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;DebugInfo: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">getResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getDebugInfo</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#ce5c00;font-weight:bold">{</span>
        <span style="color:#000">System</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">out</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">println</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Get document failed &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">getResponse</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">getStatus</span><span style="color:#ce5c00;font-weight:bold">().</span><span style="color:#c4a000">toString</span><span style="color:#ce5c00;font-weight:bold">());</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">

</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/alibaba/proximabilin.git" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list(TODO&lt;cdz&gt;: Change later)" aria-label="Developer mailing list(TODO&lt;cdz&gt;: Change later)">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list(TODO&lt;cdz&gt;: Change later)">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 The Proxima Bilin Engine Authors All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">隐私政策</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




 














<script src="/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js" integrity="sha256-OxcsE7YsK&#43;qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin="anonymous"></script>




  </body>
</html>