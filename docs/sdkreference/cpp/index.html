<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.88.1" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>C&#43;&#43; SDK | Proxima</title>


  
  <meta name="description" content="ProximaBE的C&#43;&#43; SDK主要是针对用户上游C/C&#43;&#43;模块的集成，其具备高吞吐和低负载的特点，功能上主要是包含集合管理、文档读写等能力，可以节省用户的编码成本。
这篇文章中，我们将介绍C&#43;&#43; SDK核心接口的用法以及代码示例，以协助用户更快接入。
1. 创建客户端
第一步，需要创建客户端，默 …">
<meta property="og:title" content="C&#43;&#43; SDK" />
<meta property="og:description" content="ProximaBE的C&#43;&#43; SDK主要是针对用户上游C/C&#43;&#43;模块的集成，其具备高吞吐和低负载的特点，功能上主要是包含集合管理、文档读写等能力，可以节省用户的编码成本。
这篇文章中，我们将介绍C&#43;&#43; SDK核心接口的用法以及代码示例，以协助用户更快接入。
1. 创建客户端 第一步，需要创建客户端，默认客户端采用grpc协议，且为同步调用。
#include &lt;iostream&gt;#include &#34;proxima_searcher_client.h&#34; using proxima::be; // 默认类型客户端 auto client = ProximaSearchClient::Create(); 第二步，创建完客户端之后，我们需要显示连接ProximaBE服务:
// 设置连接参数，注意这里需要填写grpc协议监听端口 ChannelOptions options(&#34;127.0.0.1:16000&#34;); // 连接服务端 Status status = client-&gt;connect(options); if (status.code != 0) { std::cerr &lt;&lt; &#34;Connect server failed.&#34; &lt;&lt; std::endl; return status.code; } 我们在连接过程中，除了简单的测试rpc连通性之外，还会与server校验版本信息，确保兼容性。
客户端所有接口，都会返回Status，用户需要检查status.code是否正常，其结构如下:
struct Status { /// 错误码，0代表成功，其它非0代表调用错误  int code; /// 错误原因, 默认为&#34;Success&#34;,否则是错误描述  std::string reason; } 代码中涉及到其它结构以及字段，可以参见ChannelOptions
2. 集合管理 我们提供了Collection的创建、删除、查询、统计等接口，供用户方便的管理集合。
2.1. 创建Collection 创建一个名为Plants的集合，其中正排列为价格&quot;price&quot;以及描述&quot;description&quot;，索引列为向量列，存储4维float类型
/// 描述Collection的具体格式 CollectionConfig config; config." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/sdkreference/cpp/" /><meta property="article:section" content="docs" />

<meta property="og:site_name" content="Proxima" />

<meta itemprop="name" content="C&#43;&#43; SDK">
<meta itemprop="description" content="ProximaBE的C&#43;&#43; SDK主要是针对用户上游C/C&#43;&#43;模块的集成，其具备高吞吐和低负载的特点，功能上主要是包含集合管理、文档读写等能力，可以节省用户的编码成本。
这篇文章中，我们将介绍C&#43;&#43; SDK核心接口的用法以及代码示例，以协助用户更快接入。
1. 创建客户端 第一步，需要创建客户端，默认客户端采用grpc协议，且为同步调用。
#include &lt;iostream&gt;#include &#34;proxima_searcher_client.h&#34; using proxima::be; // 默认类型客户端 auto client = ProximaSearchClient::Create(); 第二步，创建完客户端之后，我们需要显示连接ProximaBE服务:
// 设置连接参数，注意这里需要填写grpc协议监听端口 ChannelOptions options(&#34;127.0.0.1:16000&#34;); // 连接服务端 Status status = client-&gt;connect(options); if (status.code != 0) { std::cerr &lt;&lt; &#34;Connect server failed.&#34; &lt;&lt; std::endl; return status.code; } 我们在连接过程中，除了简单的测试rpc连通性之外，还会与server校验版本信息，确保兼容性。
客户端所有接口，都会返回Status，用户需要检查status.code是否正常，其结构如下:
struct Status { /// 错误码，0代表成功，其它非0代表调用错误  int code; /// 错误原因, 默认为&#34;Success&#34;,否则是错误描述  std::string reason; } 代码中涉及到其它结构以及字段，可以参见ChannelOptions
2. 集合管理 我们提供了Collection的创建、删除、查询、统计等接口，供用户方便的管理集合。
2.1. 创建Collection 创建一个名为Plants的集合，其中正排列为价格&quot;price&quot;以及描述&quot;description&quot;，索引列为向量列，存储4维float类型
/// 描述Collection的具体格式 CollectionConfig config; config.">

<meta itemprop="wordCount" content="2766">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="C&#43;&#43; SDK"/>
<meta name="twitter:description" content="ProximaBE的C&#43;&#43; SDK主要是针对用户上游C/C&#43;&#43;模块的集成，其具备高吞吐和低负载的特点，功能上主要是包含集合管理、文档读写等能力，可以节省用户的编码成本。
这篇文章中，我们将介绍C&#43;&#43; SDK核心接口的用法以及代码示例，以协助用户更快接入。
1. 创建客户端 第一步，需要创建客户端，默认客户端采用grpc协议，且为同步调用。
#include &lt;iostream&gt;#include &#34;proxima_searcher_client.h&#34; using proxima::be; // 默认类型客户端 auto client = ProximaSearchClient::Create(); 第二步，创建完客户端之后，我们需要显示连接ProximaBE服务:
// 设置连接参数，注意这里需要填写grpc协议监听端口 ChannelOptions options(&#34;127.0.0.1:16000&#34;); // 连接服务端 Status status = client-&gt;connect(options); if (status.code != 0) { std::cerr &lt;&lt; &#34;Connect server failed.&#34; &lt;&lt; std::endl; return status.code; } 我们在连接过程中，除了简单的测试rpc连通性之外，还会与server校验版本信息，确保兼容性。
客户端所有接口，都会返回Status，用户需要检查status.code是否正常，其结构如下:
struct Status { /// 错误码，0代表成功，其它非0代表调用错误  int code; /// 错误原因, 默认为&#34;Success&#34;,否则是错误描述  std::string reason; } 代码中涉及到其它结构以及字段，可以参见ChannelOptions
2. 集合管理 我们提供了Collection的创建、删除、查询、统计等接口，供用户方便的管理集合。
2.1. 创建Collection 创建一个名为Plants的集合，其中正排列为价格&quot;price&quot;以及描述&quot;description&quot;，索引列为向量列，存储4维float类型
/// 描述Collection的具体格式 CollectionConfig config; config."/>




<link rel="preload" href="/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css" as="style">
<link href="/scss/main.min.bd5285b713d3061549a6bfd34e5f4ec6775ede36672a3088260f0d420050647f.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>







<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Proxima</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">文档</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; 站内搜索…"
  aria-label="站内搜索…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.cb2b4d5022e50d45d3816ae8c02c5c1c.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; 站内搜索…"
  aria-label="站内搜索…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.cb2b4d5022e50d45d3816ae8c02c5c1c.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">文档</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsintroductionintroduction-li">
  <a href="/docs/introduction/introduction/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsintroductionintroduction"><span class="">简介</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgettingstarted-li">
  <a href="/docs/gettingstarted/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsgettingstarted"><span class="">快速开始</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgettingstartedinstallation-li">
  <a href="/docs/gettingstarted/installation/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgettingstartedinstallation"><span class="">安装指南</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsgettingstartedexample_usage-li">
  <a href="/docs/gettingstarted/example_usage/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgettingstartedexample_usage"><span class="">使用样例</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsadvancedguides-li">
  <a href="/docs/advancedguides/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsadvancedguides"><span class="">进阶指南</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesserver_config-li">
  <a href="/docs/advancedguides/server_config/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesserver_config"><span class="">服务配置</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesmeta_management-li">
  <a href="/docs/advancedguides/meta_management/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesmeta_management"><span class="">元数据</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesmonitor-li">
  <a href="/docs/advancedguides/monitor/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesmonitor"><span class="">监控报警</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesrepository-li">
  <a href="/docs/advancedguides/repository/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesrepository"><span class="">Repository</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidesperformance-li">
  <a href="/docs/advancedguides/performance/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidesperformance"><span class="">性能调优</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsadvancedguidestools-li">
  <a href="/docs/advancedguides/tools/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsadvancedguidestools"><span class="">常用工具</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsapireference-li">
  <a href="/docs/apireference/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsapireference"><span class="">API 手册</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsapireferencehttp-li">
  <a href="/docs/apireference/http/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsapireferencehttp"><span class="">REST APIs</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docssdkreference-li">
  <a href="/docs/sdkreference/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docssdkreference"><span class="">SDK 手册</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssdkreferencepython-li">
  <a href="/docs/sdkreference/python/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencepython"><span class="">Python SDK</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docssdkreferencecpp-li">
  <a href="/docs/sdkreference/cpp/" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencecpp"><span class="td-sidebar-nav-active-item">C&#43;&#43; SDK</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssdkreferencejava-li">
  <a href="/docs/sdkreference/java/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencejava"><span class="">Java SDK</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docssdkreferencego-li">
  <a href="/docs/sdkreference/go/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docssdkreferencego"><span class="">Golang SDK</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsusecases-li">
  <a href="/docs/usecases/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsusecases"><span class="">案例教程</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsusecasesimage_search-li">
  <a href="/docs/usecases/image_search/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsusecasesimage_search"><span class="">图片搜索</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsfaq-li">
  <a href="/docs/faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsfaq"><span class="">常见问题</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqcommon_faq-li">
  <a href="/docs/faq/common_faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqcommon_faq"><span class="">常见错误</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqperformance_faq-li">
  <a href="/docs/faq/performance_faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqperformance_faq"><span class="">性能优化</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqdeployment_faq-li">
  <a href="/docs/faq/deployment_faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqdeployment_faq"><span class="">部署问题</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsfaqsample-li">
  <a href="/docs/faq/sample/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsfaqsample"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsrelease-li">
  <a href="/docs/release/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsrelease"><span class="">发行版本</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsreleaserelease-li">
  <a href="/docs/release/release/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsreleaserelease"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsbenchmark-li">
  <a href="/docs/benchmark/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsbenchmark"><span class="">性能测试</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsbenchmarkbenchmark-li">
  <a href="/docs/benchmark/benchmark/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsbenchmarkbenchmark"><span class="">性能测试</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">












<a id="print" href="/docs/sdkreference/_print/"><i class="fa fa-print fa-fw"></i> 整节打印</a>



</div>



            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-创建客户端">1. 创建客户端</a></li>
    <li><a href="#2-集合管理">2. 集合管理</a>
      <ul>
        <li><a href="#21-创建collection">2.1. 创建Collection</a></li>
        <li><a href="#22-查询collection">2.2. 查询Collection</a></li>
        <li><a href="#23-统计collection">2.3. 统计Collection</a></li>
        <li><a href="#24-删除collection">2.4. 删除Collection</a></li>
      </ul>
    </li>
    <li><a href="#3-文档管理">3. 文档管理</a>
      <ul>
        <li><a href="#31-插入文档">3.1. 插入文档</a></li>
        <li><a href="#32-更新文档">3.2. 更新文档</a></li>
        <li><a href="#33-删除文档">3.3. 删除文档</a></li>
      </ul>
    </li>
    <li><a href="#4-文档查询">4. 文档查询</a></li>
    <li><a href="#5-错误码">5. 错误码</a></li>
    <li><a href="#6-接口类型">6. 接口&amp;类型</a>
      <ul>
        <li><a href="#proximasearchclient">ProximaSearchClient</a></li>
        <li><a href="#channeloptions">ChannelOptions</a></li>
        <li><a href="#collectionconfig">CollectionConfig</a></li>
        <li><a href="#collectioninfo">CollectionInfo</a></li>
        <li><a href="#collectionstats">CollectionStats</a></li>
        <li><a href="#writerequest">WriteRequest</a></li>
        <li><a href="#queryrequest">QueryRequest</a></li>
        <li><a href="#queryresponse">QueryResponse</a></li>
      </ul>
    </li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="/docs/">文档</a>
</li>




<li class="breadcrumb-item" >
	<a href="/docs/sdkreference/">SDK 手册</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/docs/sdkreference/cpp/">C&#43;&#43; SDK</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>C&#43;&#43; SDK</h1>
	
	<header class="article-meta">
		
		
			
				


			
				


			
		
		
	</header>    
	<p>ProximaBE的C++ SDK主要是针对用户上游C/C++模块的集成，其具备高吞吐和低负载的特点，功能上主要是包含集合管理、文档读写等能力，可以节省用户的编码成本。</p>
<p>这篇文章中，我们将介绍C++ SDK核心接口的用法以及代码示例，以协助用户更快接入。</p>
<h2 id="1-创建客户端">1. 创建客户端</h2>
<p>第一步，需要创建客户端，默认客户端采用grpc协议，且为同步调用。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&lt;iostream&gt;</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">#include</span> <span style="color:#8f5902;font-style:italic">&#34;proxima_searcher_client.h&#34;</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic"></span>
<span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">proxima</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">be</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#8f5902;font-style:italic">// 默认类型客户端
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">client</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">ProximaSearchClient</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>
</code></pre></div><p>第二步，创建完客户端之后，我们需要显示连接ProximaBE服务:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">// 设置连接参数，注意这里需要填写grpc协议监听端口
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">ChannelOptions</span> <span style="color:#000">options</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;127.0.0.1:16000&#34;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#8f5902;font-style:italic">// 连接服务端
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">connect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Connect server failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>我们在连接过程中，除了简单的测试rpc连通性之外，还会与server校验版本信息，确保兼容性。</p>
<p>客户端所有接口，都会返回Status，用户需要检查status.code是否正常，其结构如下:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">Status</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#8f5902;font-style:italic">/// 错误码，0代表成功，其它非0代表调用错误
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
  
  <span style="color:#8f5902;font-style:italic">/// 错误原因, 默认为&#34;Success&#34;,否则是错误描述
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">reason</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>代码中涉及到其它结构以及字段，可以参见<a href="#channeloptions">ChannelOptions</a></p>
<h2 id="2-集合管理">2. 集合管理</h2>
<p>我们提供了Collection的创建、删除、查询、统计等接口，供用户方便的管理集合。</p>
<h3 id="21-创建collection">2.1. 创建Collection</h3>
<p>创建一个名为Plants的集合，其中正排列为价格&quot;price&quot;以及描述&quot;description&quot;，索引列为向量列，存储4维float类型</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 描述Collection的具体格式
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">CollectionConfig</span> <span style="color:#000">config</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">collection_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">forward_columns</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;Price&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Description&#34;</span><span style="color:#000;font-weight:bold">};</span>
<span style="color:#000">config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">index_columns</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#000">IndexColumnParam</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ImageVector&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">VECTOR_FP32</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">8</span><span style="color:#000;font-weight:bold">)}</span>

<span style="color:#8f5902;font-style:italic">/// 创建Collection
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">create_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Create collection failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>集合配置详细信息请参考: <a href="#collectionconfig">CollectionConfig</a></p>
<h3 id="22-查询collection">2.2. 查询Collection</h3>
<p>创建完集合之后，我们可以使用查询接口查看其状态。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 获取CollectionInfo
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">CollectionInfo</span> <span style="color:#000">collection_info</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">describe_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">collection_info</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Get collection info failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">/// 打印CollectionInfo
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">collection_info</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">collection_name</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">collection_info</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">collection_status</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">collection_info</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">uuid</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">......</span>
</code></pre></div><p>除此之外，我们还可以将所有Collection信息一次性列出来</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 获取所有的Collection信息
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">CollectionInfo</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">collection_infos</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">list_collections</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">collection_infos</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;List collection infos failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>返回的集合信息详细字段请参考: <a href="#collectioninfo">CollectionInfo</a></p>
<h3 id="23-统计collection">2.3. 统计Collection</h3>
<p>Collection经过一段时间的读写之后，我们可以通过统计接口观察其装载的文档数据。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 获取CollectionStats
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">CollectionStats</span> <span style="color:#000">collection_stats</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">stats_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">collection_stats</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Get collection statistics failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">/// 打印CollectionStats
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">collection_stats</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">collection_name</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">collection_stats</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">total_doc_count</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">collection_stats</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">total_segment_cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">.....</span>
</code></pre></div><p>集合统计详细字段信息请参考: <a href="#collectionstats">CollectionStats</a></p>
<h3 id="24-删除collection">2.4. 删除Collection</h3>
<p>Collection完成其历史使命后，我们可以彻底删除掉某个collection。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 删除集合
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">drop_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Drop collection failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h2 id="3-文档管理">3. 文档管理</h2>
<p>对于某一个集合而言，我们提供增加、更新、删除文档的接口，同时支持批量模式。</p>
<h3 id="31-插入文档">3.1. 插入文档</h3>
<p>我们在之前已经创建完成的名为&quot;Plants&quot;的集合中，插入100条数据</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 创建一个写入请求
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">write_request</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

<span style="color:#8f5902;font-style:italic">/// 设置集合以及文档数据格式
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_collection_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_forward_columns</span><span style="color:#000;font-weight:bold">({</span><span style="color:#4e9a06">&#34;Price&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Description&#34;</span><span style="color:#000;font-weight:bold">});</span>
<span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_index_column</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ImageVector&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">VECTOR_FP32</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">8</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#8f5902;font-style:italic">/// 批量填充100条文档数据
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">row</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_row</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_primary_key</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#8f5902;font-style:italic">/// 设置为插入操作
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_operation_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">OperationType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">INSERT</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">((</span><span style="color:#204a87;font-weight:bold">float</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#0000cf;font-weight:bold">0.1f</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;iris with number &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">to_string</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">));</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_index_value</span><span style="color:#000;font-weight:bold">({</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">});</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">/// 写入到服务端
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">write_request</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Write records failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>在上述参考代码中，有几点值得注意:</p>
<ul>
<li>
<p>设置文档数据格式。 这里最早其实在创建Collection时候，我们填写过一次，这里需要再次设置的主要原因有两个。 第一个是由于我们未来会支持实时量化的能力，可能用户配置的类型与输入类型不一致，使用我们动态转换的能力。第二个则是我们可以基于这个信息做二次校验，防止插入数据格式错误。</p>
</li>
<li>
<p>批量模式。 理论上在一个WriteRequest中我们可以组合任意多的文档，但由于会增大单个网络请求包大小，一般还是建议用户根据实际情况进行限制。</p>
</li>
</ul>
<h3 id="32-更新文档">3.2. 更新文档</h3>
<p>更新过程基本与插入过程一致，仅改变文档的操作类型即可。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#000;font-weight:bold">.....</span>
<span style="color:#8f5902;font-style:italic">/// 批量更新100条文档数据
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">row</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_row</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_primary_key</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#8f5902;font-style:italic">/// 设置为更新操作
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_operation_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">OperationType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">UPDATE</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">((</span><span style="color:#204a87;font-weight:bold">float</span><span style="color:#000;font-weight:bold">)</span><span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#0000cf;font-weight:bold">0.2f</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;iris with number &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">to_string</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">));</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_index_value</span><span style="color:#000;font-weight:bold">({</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">i</span><span style="color:#000;font-weight:bold">});</span>
<span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">......</span>
</code></pre></div><blockquote>
<p><strong>NOTE</strong>: 值得注意的是，目前我们实际实现中采取的是标记删除的模式，更新=删除+新增，而删除占比过高会极大影响查询性能，这一点用户务必注意。</p>
</blockquote>
<p>写入请求的详细信息可以参考: <a href="#writerequest">WriteRequest</a></p>
<h3 id="33-删除文档">3.3. 删除文档</h3>
<p>删除过程依然可以复用上述的代码结构，如果批量请求中没有插入、更新请求，那么代码可以极大简化。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/// 创建一个写入请求
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">write_request</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

<span style="color:#8f5902;font-style:italic">/// 设置集合以及文档数据格式
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_collection_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#8f5902;font-style:italic">/// 批量删除100条文档数据
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
	<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">row</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">write_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_row</span><span style="color:#000;font-weight:bold">();</span>
  <span style="color:#8f5902;font-style:italic">/// 设置为删除操作，仅需要填写primary key即可
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_primary_key</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000">row</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_operation_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">OperationType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">DELETE</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">/// 发送到服务端
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">write_request</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Write records failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><blockquote>
<p><strong>NOTE</strong>: 值得注意的是，由于我们内部采用图索引结构，删除目前采取标记删除方式，删除比例过高会带来连通性问题，影响召回和性能。我们一般不建议用户删除超过50%的文档，否则查询性能将会弱化很多。</p>
</blockquote>
<h2 id="4-文档查询">4. 文档查询</h2>
<p>最后我们希望能够在创建的&quot;Plants&quot;集合中查询这100条数据，相似度召回10条结果。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">
<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">query_request</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">QueryRequest</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>
<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">query_response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">QueryResponse</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

<span style="color:#8f5902;font-style:italic">/// 填充请求参数
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">query_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_collection_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Plants&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">knn_param</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">query_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_knn_query_param</span><span style="color:#000;font-weight:bold">();</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_column_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ImageVector&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_topk</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">10</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_features</span><span style="color:#000;font-weight:bold">({</span><span style="color:#0000cf;font-weight:bold">0.1</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.2</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.3</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.4</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.5</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.6</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.7</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0.8</span><span style="color:#000;font-weight:bold">});</span>

<span style="color:#8f5902;font-style:italic">/// Knn查询
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">Status</span> <span style="color:#000">status</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">query</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">query_request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">query_response</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">());</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span> <span style="color:#ce5c00;font-weight:bold">!=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cerr</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#4e9a06">&#34;Query records failed.&#34;</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">status</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">code</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#8f5902;font-style:italic">/// 打印结果
</span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">size_t</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">query_response</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">result_count</span><span style="color:#000;font-weight:bold">();</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">result</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">query_response</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">result</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">size_t</span> <span style="color:#000">j</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">j</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">result</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">document_count</span><span style="color:#000;font-weight:bold">();</span> <span style="color:#000">j</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">){</span>
    <span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">doc</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">result</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">document</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">j</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#8f5902;font-style:italic">/// 获取文档的primary key和相似度距离
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">doc</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">primary_key</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">doc</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">score</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
    
    <span style="color:#8f5902;font-style:italic">/// 按顺序取正排字段
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">float</span> <span style="color:#000">price</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">desc</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000">doc</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Price&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">price</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000">doc</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Description&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">desc</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">price</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">cout</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">desc</span> <span style="color:#ce5c00;font-weight:bold">&lt;&lt;</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">endl</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p>我们query同样也可以支持批量模式</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">vector_bytes</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000">size_t</span> <span style="color:#000">vector_size</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">......</span>
<span style="color:#204a87;font-weight:bold">auto</span> <span style="color:#000">knn_param</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">query_request</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">add_knn_query_param</span><span style="color:#000;font-weight:bold">();</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_column_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;ImageVector&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_topk</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">10</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_features</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">vector_bytes</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">vector_size</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_data_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">VECTOR_FP32</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">knn_param</span><span style="color:#ce5c00;font-weight:bold">-&gt;</span><span style="color:#000">set_dimension</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">8</span><span style="color:#000;font-weight:bold">);</span>
</code></pre></div><p>上述代码中描述了设置一段连续的bytes作为查询向量，包含100个连续的查询向量，其中每个为8维float类型。</p>
<blockquote>
<p><strong>NOTE</strong>: 还有一点值得注意的是，最终的正排数据的获取，必须按照CollectionConfig定义的顺序逐一获取，顺序不对或者类型不对，均会导致获取到空结果</p>
</blockquote>
<p>上述参考代码中查询请求和查询结果的详细信息请参考: <a href="#queryrequest">QueryRequest</a></p>
<h2 id="5-错误码">5. 错误码</h2>
<table>
<thead>
<tr>
<th>错误码</th>
<th>错误原因</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>0~9999</td>
<td>服务端错误</td>
<td></td>
</tr>
<tr>
<td>10000</td>
<td>初始化客户端失败</td>
<td></td>
</tr>
<tr>
<td>10001</td>
<td>RPC连接出错</td>
<td></td>
</tr>
<tr>
<td>10002</td>
<td>客户端与服务端版本不匹配</td>
<td></td>
</tr>
<tr>
<td>10003</td>
<td>客户端还未连接</td>
<td></td>
</tr>
<tr>
<td>10004</td>
<td>请求校验失败</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="6-接口类型">6. 接口&amp;类型</h2>
<h3 id="proximasearchclient">ProximaSearchClient</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * ProximaSearchClient wrappers the operations used to call proxima search
</span><span style="color:#8f5902;font-style:italic"> * engine&#39;s service. Server may be running on another machines. It shields
</span><span style="color:#8f5902;font-style:italic"> * implementation of communication protocol and rpc details, and provide
</span><span style="color:#8f5902;font-style:italic"> * extremely high bench performance.
</span><span style="color:#8f5902;font-style:italic"> *
</span><span style="color:#8f5902;font-style:italic"> * Usage exp:
</span><span style="color:#8f5902;font-style:italic"> *     auto client = ProximaSearchClient::Create();
</span><span style="color:#8f5902;font-style:italic"> *     if (client != nullptr) {
</span><span style="color:#8f5902;font-style:italic"> *       client-&gt;connect(ChannelOptions(&#34;127.0.0.1:16000&#34;));
</span><span style="color:#8f5902;font-style:italic"> *       ...
</span><span style="color:#8f5902;font-style:italic"> *       client-&gt;create_collection();
</span><span style="color:#8f5902;font-style:italic"> *       client-&gt;close();
</span><span style="color:#8f5902;font-style:italic"> *     }
</span><span style="color:#8f5902;font-style:italic"> *
</span><span style="color:#8f5902;font-style:italic"> * Please read the examples/client_example.cc for more details.
</span><span style="color:#8f5902;font-style:italic"> *
</span><span style="color:#8f5902;font-style:italic"> * Note: the functions of this class are sync call.
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">ProximaSearchClient</span> <span style="color:#000;font-weight:bold">{</span>
 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">/// @brief Create a client instance and return its shared ptr.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param type Client type, only support &#34;GrpcClient&#34; now.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Shared ptr pointed to client impl.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @note If input type is wrong, it may return nullptr
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">ProximaSearchClientPtr</span> <span style="color:#000">Create</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">type</span><span style="color:#000;font-weight:bold">);</span>

  <span style="color:#8f5902;font-style:italic">//! Create a shared ptr of client with default type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">ProximaSearchClientPtr</span> <span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Try to connect remote server and establish connection.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param options Socket connection relative configs.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code 0 means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @note This function will try to send a list collections command
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///       to test if the server alive.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">connect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">ChannelOptions</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">options</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Close connection to remote server and cleanup self
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">close</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Create a collection with specific config.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param config Collection config
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return       Status.code 0 means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">create_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">CollectionConfig</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">config</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Drop a collection with specific name.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param collection_name Collection name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code 0 means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">drop_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">collection_name</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Show the detailed information of collection.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[in]  collection_name Collection name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[out] collection_info Collection information
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code 0 means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">describe_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">collection_name</span><span style="color:#000;font-weight:bold">,</span>
                                     <span style="color:#000">CollectionInfo</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">collection_info</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Get collection statics.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[in]  collection_name Collection name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[out] stats           Collection statistics struct
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code 0 means success, other means fail.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">stats_collection</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">collection_name</span><span style="color:#000;font-weight:bold">,</span>
                                  <span style="color:#000">CollectionStats</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">stats</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief List all collections.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[out] collections Collection infomations
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code 0 means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">list_collections</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">CollectionInfo</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">collections</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Insert/Update/Delete records.
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param request Write request
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">WriteRequest</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Knn query similar results
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[in]  request  Query request
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[out] respnose Query response
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">query</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">QueryRequest</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span>
                       <span style="color:#000">QueryResponse</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">response</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Get document by primary key
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[in]  request  Get document request
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param[out] response Get document response
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @return Status.code means success, other means fail
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">Status</span> <span style="color:#000">get_document_by_key</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">GetDocumentRequest</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span>
                                     <span style="color:#000">GetDocumentResponse</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">response</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="channeloptions">ChannelOptions</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * ChannelOptions represents the  connection config.
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">ChannelOptions</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#8f5902;font-style:italic">/// Host name of proximabe server
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// For exapmle: &#34;127.0.0.1:16000&#34;
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Required field
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">host</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">/// Max rpc duration out over server
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional field, default 1000
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">timeout_ms</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">1000U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/// Max retry times when rpc failed
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional filed, default 3
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">max_retry</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">3U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/// Connection pool count
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional filed, default 1
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">connection_count</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#000">ChannelOptions</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">host</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="collectionconfig">CollectionConfig</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * CollectionConfig describes the config options of collection.
</span><span style="color:#8f5902;font-style:italic"> * It includes description of index columns and forward columns.
</span><span style="color:#8f5902;font-style:italic"> * Index columns means that this column data is for knn searching.
</span><span style="color:#8f5902;font-style:italic"> * Forward columns means that this column data is just for display,
</span><span style="color:#8f5902;font-style:italic"> * which is not anticipating in search process.
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">CollectionConfig</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#8f5902;font-style:italic">/// Collection name, it should be unique
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Required field
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">collection_name</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">/// Collection will split into serveral segments
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// This param means max doc limits in one segment
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional field, default 0, means no limit
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">max_docs_per_segment</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/// Forward column names
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional field
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">forward_columns</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">/// Index column infos
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Required filed
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">IndexColumnParam</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">index_columns</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">/// Database repository config
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional field, default empty
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">DatabaseRepository</span> <span style="color:#000">database_repository</span><span style="color:#000;font-weight:bold">{};</span>
<span style="color:#000;font-weight:bold">};</span>


<span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * IndexColumnParam represents the index config of index column.
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">IndexColumnParam</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#8f5902;font-style:italic">/// Column name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Required field
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">column_name</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">/// Column index type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional field, default IndexType::PROXIMA_GRAPH_INDEX
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">IndexType</span> <span style="color:#000">index_type</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">IndexType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">PROXIMA_GRAPH_INDEX</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/// Stored data type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional filed, default DataType::VECTOR_FP32
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">DataType</span> <span style="color:#000">data_type</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">DataType</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">VECTOR_FP32</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/// Stored data dimension
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional filed, default 0
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">dimension</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/// Extra params for column index
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// Optional field
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// For example:
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///   {&#34;ef_construction&#34;: &#34;400&#34;, &#34;ef_search&#34;: &#34;300&#34;}
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">KVPair</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">extra_params</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#000">IndexColumnParam</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">default</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#000">IndexColumnParam</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val1</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">DataType</span> <span style="color:#000">val2</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">val3</span><span style="color:#000;font-weight:bold">)</span>
      <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">column_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">val1</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">data_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">val2</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">dimension</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">val3</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{}</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="collectioninfo">CollectionInfo</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * CollectionInfo describes the detailed information of collection,
</span><span style="color:#8f5902;font-style:italic"> * which is ProximaSE server returned.
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">CollectionInfo</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">CollectionStatus</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">INITIALIZED</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">SERVING</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">DRPPED</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">collection_name</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection status
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">CollectionStatus</span> <span style="color:#000">collection_status</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">CollectionStatus</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">INITIALIZED</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Unique uuid to a collection
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">collection_uuid</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">//! Latest record&#39;s log sequence number
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">latest_lsn</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Latest record&#39;s lsn context
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">latest_lsn_context</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">//! Server magic number, generally is server started timestamp
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">magic_number</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection&#39;s config max doc number per segment
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">max_docs_per_segment</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection&#39;s forward column names
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">forward_columns</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection&#39;s index column params
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">IndexColumnParam</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">index_columns</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection&#39;s database repository information
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">DatabaseRepository</span> <span style="color:#000">database_repository</span><span style="color:#000;font-weight:bold">{};</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="collectionstats">CollectionStats</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * CollectionStats describes the detailed stastistics of collection
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">CollectionStats</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic">   * Segment state
</span><span style="color:#8f5902;font-style:italic">   */</span>
  <span style="color:#204a87;font-weight:bold">enum</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SegmentState</span> <span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">CREATED</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">WRITING</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">DUMPING</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">COMPACTING</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">PERSIST</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">4</span>
  <span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">/*
</span><span style="color:#8f5902;font-style:italic">   * SegmentStats describes the detailed stastistics of segment
</span><span style="color:#8f5902;font-style:italic">   */</span>
  <span style="color:#204a87;font-weight:bold">struct</span> <span style="color:#000">SegmentStats</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#8f5902;font-style:italic">//! Segment unique id
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">segment_id</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Segment state
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#000">SegmentState</span> <span style="color:#000">segment_state</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">SegmentState</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">CREATED</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Document count in this segment
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">doc_count</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Index file count of this segment
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">index_file_count</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Totaol index file size
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">index_file_size</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Min document id
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">min_doc_id</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Max document id
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">max_doc_id</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Min primary key value of the segment
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">min_primary_key</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Min primary key value of the segment
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">max_primary_key</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Earliest record timestamp
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">min_timestamp</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Last record timestamp
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">max_timestamp</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Minimal log sequence number
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">min_lsn</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

    <span style="color:#8f5902;font-style:italic">//! Maximum log sequence number
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">max_lsn</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>
  <span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Collection name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#000">collection_name</span><span style="color:#000;font-weight:bold">{};</span>

  <span style="color:#8f5902;font-style:italic">//! Total document count of this collection
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">total_doc_count</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Total segment count of this collectoin
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">total_segment_count</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Total index file count
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">total_index_file_count</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Total index file size
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">total_index_file_size</span><span style="color:#000;font-weight:bold">{</span><span style="color:#0000cf;font-weight:bold">0U</span><span style="color:#000;font-weight:bold">};</span>

  <span style="color:#8f5902;font-style:italic">//! Detailed segment stastistics
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">SegmentStats</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">segment_stats</span><span style="color:#000;font-weight:bold">{};</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="writerequest">WriteRequest</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * WriteRequest shows how to wrapper write request data fields.
</span><span style="color:#8f5902;font-style:italic"> *
</span><span style="color:#8f5902;font-style:italic"> * Usage exp:
</span><span style="color:#8f5902;font-style:italic"> *   WriteRequestPtr request = WriteRequest::Create();
</span><span style="color:#8f5902;font-style:italic"> *   request-&gt;set_collection_name(&#34;test_collection&#34;);
</span><span style="color:#8f5902;font-style:italic"> *   request-&gt;set_row_meta({&#34;test_column&#34;}, {});
</span><span style="color:#8f5902;font-style:italic"> *   auto row = request-&gt;add_row();
</span><span style="color:#8f5902;font-style:italic"> *   row-&gt;set_primary_key = 123;
</span><span style="color:#8f5902;font-style:italic"> *   row-&gt;set_operation_type(OperationType::OP_INSERT);
</span><span style="color:#8f5902;font-style:italic"> *   row-&gt;add_index_value({0.1, 0.2, 0.3});
</span><span style="color:#8f5902;font-style:italic"> *   ...
</span><span style="color:#8f5902;font-style:italic"> *   client-&gt;write(*request);
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">WriteRequest</span> <span style="color:#000;font-weight:bold">{</span>
 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic">   * A row describes the format of one record
</span><span style="color:#8f5902;font-style:italic">   */</span>
  <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Row</span> <span style="color:#000;font-weight:bold">{</span>
   <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
    <span style="color:#8f5902;font-style:italic">//! Set primary key, required
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_primary_key</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set operation type, optional, default DataType::INSERT
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_operation_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">OperationType</span> <span style="color:#000">op_type</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set lsn, optional, default 0
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_lsn</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">lsn</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set lsn context, optional, default &#34;&#34;
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_lsn_context</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">lsn_context</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">/// @brief Add forward value with string type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">/// @note  Add forward value sort must match configured
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///        forward columns in CollectionConfig
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with bool type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">bool</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with int32 type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int32_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with int64 type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int64_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with uint32 type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with uint64 type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with float type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">float</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add forward value with double type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">double</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">/// @brief Add index value, vector bytes type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">/// @note Add index value sort must match configured
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///       index columns in CollectionConfig
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_index_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">size_t</span> <span style="color:#000">val_len</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add index value, vector array type
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_index_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">float</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">/// Add index value by json format
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">/// Two json format:
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///   &#34;[0.1, 0.2, 0.3, 0.4]&#34;
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///   &#34;[[0.1, 0.2, 0.3, 0.4], [0.5, 0.6, 0.7, 0.8]]&#34;
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_index_value_by_json</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">json_val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">};</span>
  <span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">RowPtr</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">shared_ptr</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">Row</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">;</span>

 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">//! Constructor
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">WriteRequestPtr</span> <span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

  <span style="color:#8f5902;font-style:italic">//! Set collection name, required, must be unique
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_collection_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Add forward column in row meta
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @note Forward column names&#39; sort must match configured
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///       forward columns in CollectionConfig
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_column</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">column_name</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Add forward columns in row meta
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @note Forward column names&#39; sort must match configured
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///       forward columns in CollectionConfig
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_forward_columns</span><span style="color:#000;font-weight:bold">(</span>
      <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">column_names</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">/// @brief Add index column in row meta
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param column_name Column name
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param data_type   Send data type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @param dimension   Send data dimension
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">/// @note Index column names&#39; sort must match configured
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#8f5902;font-style:italic">///       index columns in CollectionConfig
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_index_column</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">column_name</span><span style="color:#000;font-weight:bold">,</span>
                                <span style="color:#000">DataType</span> <span style="color:#000">data_type</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">dimension</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Add row data, required, can&#39;t send empty request
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">WriteRequest</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">RowPtr</span> <span style="color:#000">add_row</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Set request id for tracelog, optional
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_request_id</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">request_id</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Set magic number for validation, optional
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_magic_number</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">magic_number</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="queryrequest">QueryRequest</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * QueryRequest shows how to wrapper query data fields.
</span><span style="color:#8f5902;font-style:italic"> *
</span><span style="color:#8f5902;font-style:italic"> * Usage exp:
</span><span style="color:#8f5902;font-style:italic"> *   QueryRequestPtr request = QueryRequest::Create();
</span><span style="color:#8f5902;font-style:italic"> *   request-&gt;set_collection_name(&#34;test_colletion&#34;);
</span><span style="color:#8f5902;font-style:italic"> *   auto knn_param = request-&gt;add_knn_query_param();
</span><span style="color:#8f5902;font-style:italic"> *   knn_param-&gt;set_column_name(&#34;test_column&#34;);
</span><span style="color:#8f5902;font-style:italic"> *   knn_param-&gt;set_features({0.1, 0.2, 0.3, 0.4});
</span><span style="color:#8f5902;font-style:italic"> *   knn_param-&gt;set_batch_count(1);
</span><span style="color:#8f5902;font-style:italic"> *   knn_param-&gt;set_dimension(4);
</span><span style="color:#8f5902;font-style:italic"> *   knn_param-&gt;set_data_type(DT_VECTOR_FP32);
</span><span style="color:#8f5902;font-style:italic"> *   ...
</span><span style="color:#8f5902;font-style:italic"> *
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">QueryRequest</span> <span style="color:#000;font-weight:bold">{</span>
 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic">   * KnnQueryParam describes the options of knn query
</span><span style="color:#8f5902;font-style:italic">   */</span>
  <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">KnnQueryParam</span> <span style="color:#000;font-weight:bold">{</span>
   <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
    <span style="color:#8f5902;font-style:italic">//! Set column name, required
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_column_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set topk, required
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_topk</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">/// Set query vector with bytes format by single
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">/// Required set
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_features</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">size_t</span> <span style="color:#000">val_len</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set features with vector array format by single
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_features</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">float</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set query vector with bytes format by batch
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_features</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">size_t</span> <span style="color:#000">val_len</span><span style="color:#000;font-weight:bold">,</span>
                              <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">batch</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">/// Set features by json format
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">/// Two json format:
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///   &#34;[0.1, 0.2, 0.3, 0.4]&#34;
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#8f5902;font-style:italic">///   &#34;[[0.1, 0.2, 0.3, 0.4], [0.5, 0.6, 0.7, 0.8]]&#34;
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_features_by_json</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">json_val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set features by json format and by batch
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_features_by_json</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">json_val</span><span style="color:#000;font-weight:bold">,</span>
                                      <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">batch</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set vector data dimension, required
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_dimension</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set vector data type, required
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_data_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">DataType</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set search radius, optional, default 0.0f not open
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_radius</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">float</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Set if use linear search, optional, default false
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_linear</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">bool</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Add extra params, like ef_search ..etc, optional
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">add_extra_param</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">};</span>
  <span style="color:#204a87;font-weight:bold">using</span> <span style="color:#000">KnnQueryParamPtr</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">shared_ptr</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">KnnQueryParam</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">;</span>

 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">//! Constructor
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">QueryRequestPtr</span> <span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

  <span style="color:#8f5902;font-style:italic">//! Set collection name, required
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_collection_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Set knn query param, required
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">QueryRequest</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">KnnQueryParamPtr</span> <span style="color:#000">add_knn_query_param</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Set debug mode, optional, default false
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">set_debug_mode</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">bool</span> <span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div><h3 id="queryresponse">QueryResponse</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * QueryResponse shows the format of query response.
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">QueryResponse</span> <span style="color:#000;font-weight:bold">{</span>
 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic">   * Result represents a knn query&#39;s result
</span><span style="color:#8f5902;font-style:italic">   */</span>
  <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Result</span> <span style="color:#000;font-weight:bold">{</span>
   <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
    <span style="color:#8f5902;font-style:italic">//! Return document count
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">size_t</span> <span style="color:#000">document_count</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

    <span style="color:#8f5902;font-style:italic">//! Return document pointer of specific pos
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">DocumentPtr</span> <span style="color:#000">document</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">index</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">};</span>

 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">//! Constructor
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#000">QueryResponsePtr</span> <span style="color:#000">Create</span><span style="color:#000;font-weight:bold">();</span>

  <span style="color:#8f5902;font-style:italic">//! Return debug info
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">debug_info</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Return query latency, microseconds
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">latency_us</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Return batch result count
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">size_t</span> <span style="color:#000">result_count</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Return result pointer of specific batch pos
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">QueryResponse</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">ResultPtr</span> <span style="color:#000">result</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">int</span> <span style="color:#000">index</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">};</span>


<span style="color:#8f5902;font-style:italic">/**
</span><span style="color:#8f5902;font-style:italic"> * Document shows the format of knn query response
</span><span style="color:#8f5902;font-style:italic"> */</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">Document</span> <span style="color:#000;font-weight:bold">{</span>
 <span style="color:#204a87;font-weight:bold">public</span><span style="color:#ce5c00;font-weight:bold">:</span>
  <span style="color:#8f5902;font-style:italic">//! Return document primary key
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#000">primary_key</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Return calculated knn distance score
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">float</span> <span style="color:#000">score</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Return forward values count
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#000">size_t</span> <span style="color:#000">forward_count</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward names
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_names</span><span style="color:#000;font-weight:bold">(</span>
      <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">vector</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">forward_names</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with string type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with bool type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">bool</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with int32 type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#204a87;font-weight:bold">int32_t</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with int64 type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#204a87;font-weight:bold">int64_t</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with uint32 type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#204a87;font-weight:bold">uint32_t</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with uint64 type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span>
                                 <span style="color:#204a87;font-weight:bold">uint64_t</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with float type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">float</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>

  <span style="color:#8f5902;font-style:italic">//! Get forward value with double type
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">virtual</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">get_forward_value</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">std</span><span style="color:#ce5c00;font-weight:bold">::</span><span style="color:#000">string</span> <span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">double</span> <span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">};</span>
</code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">

</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/alibaba/proximabilin.git" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list(TODO&lt;cdz&gt;: Change later)" aria-label="Developer mailing list(TODO&lt;cdz&gt;: Change later)">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list(TODO&lt;cdz&gt;: Change later)">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 The Proxima Bilin Engine Authors All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">隐私政策</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




 














<script src="/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js" integrity="sha256-OxcsE7YsK&#43;qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin="anonymous"></script>




  </body>
</html>